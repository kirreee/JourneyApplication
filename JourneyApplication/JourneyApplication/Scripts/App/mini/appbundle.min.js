var app=angular.module("app",["ngRoute","chart.js"]).run(function(){console.log("app.run")});app.config(["$routeProvider",function(n){n.when("/home",{templateUrl:"../Partials/Home.html",controller:"HomeController"}).when("/endtrip/:id",{templateUrl:"../Partials/EndTrip.html",controller:"StopTripController"}).when("/starttrip",{templateUrl:"../Partials/StartTrip.html",controller:"TripController"}).when("/vehicles",{templateUrl:"../Partials/vehicles.html",controller:"VehicleController"}).when("/newvehicle",{templateUrl:"../Partials/NewVehicle.html",controller:"VehicleController"}).when("/editvehicle/:id",{templateUrl:"../Partials/EditVehicle.html",controller:"EditVehicleController"}).when("/stats",{templateUrl:"../Partials/stats.html",controller:"StatsController"}).otherwise({redirectTo:"/home"})}]);app.controller("HomeController",function(n,t,i,r){r.get("api/Errands-ongoing").then(function(t){n.errands=t.data},function(){console.log("NÃ¥got gick fel!")})});app.service("NavigationService",function(n,t){this.goToPage=function(n){t.path("/"+n)};this.goBackHistory=function(n){if(typeof n=="number"){window.history.go(-n);return}window.history.back()};this.goToStart=function(){t.path("/")}});app.controller("StatsController",function(n,t,i,r,u,f){var o=0,s=0,h=0,e;n.labels=["0-20km","21-50km","50km +"];n.updateGraph=function(){console.log("Tjenare");n.data=[];angular.forEach(n.errands,function(t){e=t.Added;e=new Date(e);e<=n.toDate&&e>=n.fromDate&&t.Vehicle.Id==n.selectedVehicle&&(t.ArrivalKm-t.StartKm<21?s++:t.ArrivalKm<50?o++:h++,n.data=[s,o,h])})};n.GeneratePdf=function(){console.log("Tjenare");var i={vehicleId:n.selectedVehicle,toDate:n.toDate,fromDate:n.fromDate};t.post("/api/pdf/generate",i,{headers:{"Content-Type":"application/json"}}).then(function(n){f.open(n.data)})};t.get("api/Errands").then(function(t){n.errands=t.data});t.get("api/Vehicles").then(function(t){n.vehicles=t.data})});